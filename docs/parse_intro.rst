Introduction to Parse
=====================

Parse is an Application Programming Interface
(API) that you use to manage devices, subscriptions, publications, and security
for ingestion of OSIsoft Message Format (OMF) messages into OSIsoft Cloud
Services (OCS). You can use OMF to upload or store information in Qi.

Devices
-------

A Device is a logical construct which is used by OSIsoft Cloud Services (OCS) to authenticate 
and categorize OSIsoft Message Format (OMF) messages. When a device is registered using the API, 
a security token is generated and returned to the caller. The token must be added to the headers 
of OMF messages that are sent to OCS. If a device is revoked, all security tokens generated 
for the Device become invalid. 

While OMF messages may be sent to OCS immediately after provisioning a device, the messages 
cannot be made available for consumption until a Publication is created. However, some 
messages are stored for later consumption in OCS databases. See OMF documentation for more information. 

Tokens
------

The security token generated during device creation is a bearer token, which means that any 
client that presents the token will be able to authenticate as that device, assuming the 
token is valid. Because of this, it is imperative that the token be stored in a secure 
location that is accessible only to the application that is sending data. If the security 
token is ever compromised, it is possible for an unauthorized client to impersonate the device 
until the token expires or is revoked. 

The security token contains information that uniquely 
identifies the device. The following information is contained in the token: 

  * Device Id: A unique Id for the device. The Id is generated by the API. 
  * Tenant Id: This Id identifies the owner of the device. 
  * Expiration Time: This determines when the security token expires. 
  * Signature: This is a cryptographic signature that verifies that the token is legitimate 
    and has not been tampered with. The signature uses the HMAC-SHA256 algorithm. 

The security token should never be transported over an unsecure network connection. If, for example, 
you have a separate management service that performs token registration and renewal with the 
API and then pushes the token down to the device that generates OMF messages, you must ensure that
your network connection to the device uses SSL/TLS or another secure protocol. 

Because each OMF message contains the token, never send OMF data to a service that does not 
implement SSL/TLS or other secure protocol. It is recommended that you keep token expiration times 
short and to have your application renew the token before it expires. For example, you could 
specify that the token expires after 24 hours and have your application renew the token every 
12 hours. By following this example, if the token is compromised, you limit the amount of time 
the token is valid. 

Device API calls 
----------------

The API calls in this section are used to create and manipulate devices and generate security tokens.  


+-----------------+-------------------------+----------------------------------------+
| Property        | Type                    | Details                                |
+=================+=========================+========================================+
| TenantId        | string                  | Identifies the owner of the device.    |
+-----------------+-------------------------+----------------------------------------+
| DeviceId        | string                  | A unique ID generated by the API when  |
|                 |                         | the device is created.                 |
+-----------------+-------------------------+----------------------------------------+
| DeviceName      | string                  | A friendly name for the device.        |
+-----------------+-------------------------+----------------------------------------+
| Revoked         | boolean                 | If a Device is revoked, any clients    |
|                 |                         | associated with the Device token are   |
|                 |                         | prevented from sending data.           |
+-----------------+-------------------------+----------------------------------------+
| ProducerToken   | string                  | A set of claims along with a           |
|                 |                         | cryptographic signature that verifies  |
|                 |                         | that the token is legitimate and has   |
|                 |                         | not been tampered with. It is used     |
|                 |                         | when building OMF messages that are    |
|                 |                         | sent to the OCS.                       |
+-----------------+-------------------------+----------------------------------------+
| TokenExpiration | string                  | The time that the ProducerToken will   |
|                 |                         | expire. The string is formatted using  |
|                 |                         | ISO 8601 format.                       |
+-----------------+-------------------------+----------------------------------------+

