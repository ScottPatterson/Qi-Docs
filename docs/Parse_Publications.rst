Publications 
============

Publication information 
-----------------------

A Publication is used to aggregate data received from devices and make it available for consumption 
via a Subscription. A publication must contain at least one device. Devices may be added to or 
removed from an existing publication. A given device may also belong to multiple publications. 

When a publication is created, data sent from its assigned devices is routed to a special queue 
where it can be consumed by a subscription. This queue provides a buffer of up to one day for 
subscriptions which are temporarily unable to receive data. 

Publication API calls 
---------------------

The API calls in this section are used to create and manipulate publications.  

Data Models 
-----------

Publication information is contained in an object called ``Publication`` and has the following format: 


+-----------------+-------------------------+----------------------------------------+
| Property        | Type                    | Details                                |
+=================+=========================+========================================+
| TenantId        | string                  | Identifies the owner of the            |
|                 |                         | publication                            |
+-----------------+-------------------------+----------------------------------------+
| PublicationId   | string                  | Unique ID generated by the API during  |
|                 |                         | creation                               |
+-----------------+-------------------------+----------------------------------------+
| PublicationName | string                  | A friendly name for the Publication    |
+-----------------+-------------------------+----------------------------------------+
| Description     | string                  | An optional description for the        |
|                 |                         | Publication.                           |
+-----------------+-------------------------+----------------------------------------+

Information about a publication and its mapped devices is contained in an object 
called ``MappedPublication`` which extends ``Publication``: 

+-----------------+-------------------------+----------------------------------------+
| Property        | Type                    | Details                                |
+=================+=========================+========================================+
| DeviceId        | string                  | Unique Id for the device               |
+-----------------+-------------------------+----------------------------------------+
| PublicationId   | string                  | Unique ID for the Publication          |
+-----------------+-------------------------+----------------------------------------+

********************************

``GET api/tenants/{tenantId}/publications/count``
------------------------------------------------

Get the number of publications for a tenant. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Returns**

An integer. 

**************************

``GET api/tenants/{tenantId}/publications/{publicationId}``

Get a specific publication. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 
``publicationId``
  Unique ID for the device. 

**Returns**

A Publication object. 

**************************

``GET api/tenants/{tenantId}/publications``
-------------------------------------------

Get all publications for a tenant. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Returns**

An array of Publication objects. 

************************

``GET api/tenants/{tenantId}/devicepublicationmappings/device/{deviceId}``
--------------------------------------------------------------------------

Gets a list of publications that a device is currently mapped to. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 
``deviceId``
  Unique ID for the device. 

**Returns**

An array of Publication objects. 

****************************

``GET api/tenants/{tenantId}/devicepublicationmappings/publication/{publicationId}``

Gets a list of devices that are currently mapped to a publication 

**Parameters**

``tenantId``
  Unique ID for the tenant. 
``publicationId``
  Unique ID for the device. 

**Returns**

An array of Device objects. 

***************************

``POST api/tenants/{tenantId}/publication``
-----------------------------------------

Creates or updates a publication. Only the publication name and description can be updated. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Body**

A MappedPublication object. 

**Returns**

A MappedPublication object. 


***********************

``POST api/tenants/{tenantId}/publications``

Creates or updates multiple publication. Only the publication name and description can be updated. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Body**

An array of MappedPublication objects. 

**Returns**

An array of MappedPublication objects. 

**********************

``POST api/tenants/{tenantId}/devicepublicationmapping``

Creates a mapping between a device and publication. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Body**

A MappedDevice object. 

**Returns**

A MappedDevice object. 

**********************

``POST api/tenants/{tenantId}/devicepublicationmappings``

Creates multiple mappings between devices and publications 

**Parameters**

``tenantId``
  Unique ID for the tenant. 

**Body**

An array of MappedDevice objects. 

**Returns** 

An array of MappedDevice objects. 

************************

``DELETE api/tenants/{tenantId}/devicepublicationmappings/{publicationId}``

Delete mappings between a publication and multiple devices. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 
``publicationId``
  Unique ID for the publication. 

**Body**

A string array of Device IDs to remove from the Publication. 


**************************

``DELETE api/tenants/{tenantId}/publications/{publicationId}``

Delete a publication. 

**Parameters**

``tenantId``
  Unique ID for the tenant. 
``publicationId``
  Unique ID for the publication. 

************************
